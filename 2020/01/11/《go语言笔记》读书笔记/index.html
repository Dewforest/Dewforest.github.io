<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>《Go 语言笔记》、《Go By Example》读书笔记 | Amezf's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><meta name="generator" content="Hexo 4.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">《Go 语言笔记》、《Go By Example》读书笔记</h1><a id="logo" href="/.">Amezf's Blog</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 主页</i></a><a href="/archives/"><i class="fa fa-archive"> 文章</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">《Go 语言笔记》、《Go By Example》读书笔记</h1><div class="post-meta">Jan 11, 2020<span> | </span><span class="category"><a href="/categories/Golang/">Golang</a></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Contents</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#《Go-语言笔记》"><span class="toc-number">1.</span> <span class="toc-text">《Go 语言笔记》</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#函数"><span class="toc-number">1.1.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#延迟调用-Defer"><span class="toc-number">1.1.1.</span> <span class="toc-text">延迟调用(Defer)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-panic-抛出错误，recover-捕获错误"><span class="toc-number">1.1.2.</span> <span class="toc-text">使用 panic 抛出错误，recover 捕获错误</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如何区别-panic-和-error"><span class="toc-number">1.1.3.</span> <span class="toc-text">如何区别 panic 和 error</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据"><span class="toc-number">1.2.</span> <span class="toc-text">数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Array"><span class="toc-number">1.2.1.</span> <span class="toc-text">Array</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slice"><span class="toc-number">1.2.2.</span> <span class="toc-text">slice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#append"><span class="toc-number">1.2.3.</span> <span class="toc-text">append</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#copy"><span class="toc-number">1.2.4.</span> <span class="toc-text">copy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#map"><span class="toc-number">1.2.5.</span> <span class="toc-text">map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#struct"><span class="toc-number">1.2.6.</span> <span class="toc-text">struct</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#匿名函数"><span class="toc-number">1.2.7.</span> <span class="toc-text">匿名函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#方法"><span class="toc-number">1.3.</span> <span class="toc-text">方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#匿名字段"><span class="toc-number">1.3.1.</span> <span class="toc-text">匿名字段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#接口"><span class="toc-number">1.4.</span> <span class="toc-text">接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#接口转换"><span class="toc-number">1.4.1.</span> <span class="toc-text">### 接口转换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#并发"><span class="toc-number">1.5.</span> <span class="toc-text">并发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#调度器-runtime"><span class="toc-number">1.5.1.</span> <span class="toc-text">调度器 runtime</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Channel"><span class="toc-number">1.5.2.</span> <span class="toc-text">Channel</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#选择"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">选择</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#《Go-By-Example》"><span class="toc-number">2.</span> <span class="toc-text">《Go By Example》</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#唯一的循环语句-for"><span class="toc-number">2.0.1.</span> <span class="toc-text">唯一的循环语句 for</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#可以在if里写新变量声明"><span class="toc-number">2.0.2.</span> <span class="toc-text">可以在if里写新变量声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#切片"><span class="toc-number">2.0.3.</span> <span class="toc-text">切片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Map"><span class="toc-number">2.0.4.</span> <span class="toc-text">Map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Range"><span class="toc-number">2.0.5.</span> <span class="toc-text">Range</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不确定变量函数"><span class="toc-number">2.0.6.</span> <span class="toc-text">不确定变量函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#匿名函数与闭包-closures"><span class="toc-number">2.0.7.</span> <span class="toc-text">匿名函数与闭包(closures)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#指针"><span class="toc-number">2.0.8.</span> <span class="toc-text">指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#结构体-struct"><span class="toc-number">2.0.9.</span> <span class="toc-text">结构体(struct)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#方法-methods"><span class="toc-number">2.0.10.</span> <span class="toc-text">方法(methods)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#接口-interfaces"><span class="toc-number">2.0.11.</span> <span class="toc-text">接口(interfaces)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#错误处理"><span class="toc-number">2.0.12.</span> <span class="toc-text">错误处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Go内置的并发-Goroutines"><span class="toc-number">2.0.13.</span> <span class="toc-text">Go内置的并发(Goroutines)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#管道-channels"><span class="toc-number">2.0.14.</span> <span class="toc-text">管道(channels)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Select"><span class="toc-number">2.0.15.</span> <span class="toc-text">Select</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#管道的关闭与管道出值的第二个值"><span class="toc-number">2.0.16.</span> <span class="toc-text">管道的关闭与管道出值的第二个值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定时器"><span class="toc-number">2.0.17.</span> <span class="toc-text">定时器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#触发器"><span class="toc-number">2.0.18.</span> <span class="toc-text">触发器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#runtime-调度器"><span class="toc-number">2.0.19.</span> <span class="toc-text">runtime 调度器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用函数自定义排序"><span class="toc-number">2.0.20.</span> <span class="toc-text">使用函数自定义排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-Panic-和-Defer-进行错误处理"><span class="toc-number">2.0.21.</span> <span class="toc-text">使用 Panic 和 Defer 进行错误处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#组合函数"><span class="toc-number">2.0.22.</span> <span class="toc-text">组合函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符串函数"><span class="toc-number">2.0.23.</span> <span class="toc-text">字符串函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符串格式化"><span class="toc-number">2.0.24.</span> <span class="toc-text">字符串格式化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#正则"><span class="toc-number">2.0.25.</span> <span class="toc-text">正则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#生成临时文件"><span class="toc-number">2.0.26.</span> <span class="toc-text">生成临时文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#《Go-语言实战》"><span class="toc-number">3.</span> <span class="toc-text">《Go 语言实战》</span></a></li></ol></div></div><div class="post-content"><h1 id="《Go-语言笔记》"><a href="#《Go-语言笔记》" class="headerlink" title="《Go 语言笔记》"></a>《Go 语言笔记》</h1><blockquote>
<p><a href="https://github.com/qyuhen/book" target="_blank" rel="noopener">https://github.com/qyuhen/book</a></p>
</blockquote>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="延迟调用-Defer"><a href="#延迟调用-Defer" class="headerlink" title="延迟调用(Defer)"></a>延迟调用(Defer)</h3><p>关键字<code>defer</code>用于注册延迟调用，这些调用直到<code>ret</code>前才被执行，通常用于释放资源或错误处理</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span> <span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line">   f, err := os.Create(<span class="string">"test.txt"</span>)</span><br><span class="line">   <span class="keyword">if</span> err != <span class="literal">nil</span> &#123; <span class="keyword">return</span> err &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">defer</span> f.Close()</span><br><span class="line"></span><br><span class="line">   f.WriteString(<span class="string">"Hello, World"</span>)</span><br><span class="line">   <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>多个<code>defer</code>注册，按FILO次序执行，哪怕函数或某个延迟调用发生错误，这些调用依旧会被执行</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span> <span class="params">(x <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">   <span class="keyword">defer</span> <span class="built_in">println</span>(<span class="string">"a"</span>)</span><br><span class="line">   <span class="keyword">defer</span> <span class="built_in">println</span>(<span class="string">"b"</span>)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="built_in">println</span>(<span class="number">100</span> / x)</span><br><span class="line">   &#125;()</span><br><span class="line"></span><br><span class="line">   <span class="keyword">defer</span> <span class="built_in">println</span>(<span class="string">"c"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用-panic-抛出错误，recover-捕获错误"><a href="#使用-panic-抛出错误，recover-捕获错误" class="headerlink" title="使用 panic 抛出错误，recover 捕获错误"></a>使用 panic 抛出错误，recover 捕获错误</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">         <span class="built_in">println</span>(err.(<span class="keyword">string</span>))</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;()</span><br><span class="line"></span><br><span class="line">   <span class="built_in">panic</span>(<span class="string">"panic error!"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="如何区别-panic-和-error"><a href="#如何区别-panic-和-error" class="headerlink" title="如何区别 panic 和 error"></a>如何区别 panic 和 error</h3><p>导致关键流程出现不可修复性错误的时候使用panic，其他使用error</p>
<h2 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h2><h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><ul>
<li>数组是数值型，赋值和传参会复制整个数组，而不是指针</li>
<li>数组长度必须是常量，且<strong>是类型的组成部分</strong>。eg:<code>[2]int</code>和<code>[3]int</code>是不同类型</li>
<li>支持”==”、”!=”操作符，因为内存总是被初始化过的</li>
<li>指针数组<code>[n]* T</code>，数组指针 <code>*n[T]</code></li>
</ul>
<h3 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> Slice &#123;</span><br><span class="line">	<span class="keyword">byte</span>* array;</span><br><span class="line">    uintgo <span class="built_in">len</span>;</span><br><span class="line">    uintgo <span class="built_in">cap</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>引用类型，但自身是结构体，值拷贝传递</li>
<li>属性 len 表示可用元素数量，读写操作不能超过限制</li>
<li>属性 cap 表示最大扩张量，不能超过数组限制</li>
<li>如果 slice == nil，那么 len 、 cap 结果都等于 0</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data := [...]<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;</span><br><span class="line">slice := data[<span class="number">1</span>:<span class="number">4</span>:<span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<p>可直接创建<code>slice</code>对象，自动分配底层数组</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s1 := []<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">8</span>:<span class="number">100</span>&#125;</span><br><span class="line">fmt.Println(s1, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1))</span><br><span class="line"></span><br><span class="line">s2 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">6</span>, <span class="number">8</span>)</span><br><span class="line">fmt.Println(s2, <span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2))</span><br><span class="line"></span><br><span class="line">s3 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">6</span>)</span><br><span class="line">fmt.Println(s3, <span class="built_in">len</span>(s3), <span class="built_in">cap</span>(s3))</span><br></pre></td></tr></table></figure>

<p>运用<code>[...]type{data}</code>和<code>[n]type{data}</code>创建的是array，而运用<code>[]type{data}</code>创建的是slice，slice运用的是引用传递，array运用的是值传递</p>
<h3 id="append"><a href="#append" class="headerlink" title="append"></a>append</h3><p>向<code>slice</code>尾部添加数据，返回新的<code>slice</code>对象</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">s := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>, <span class="number">5</span>)</span><br><span class="line">fmt.Printf(<span class="string">"%p\n"</span>, &amp;s)</span><br><span class="line"></span><br><span class="line">s2 := <span class="built_in">append</span>(s, <span class="number">1</span>)</span><br><span class="line">fmt.Printf(<span class="string">"%p\n"</span>, &amp;s2)</span><br><span class="line"></span><br><span class="line">fmt.Println(s, s2)</span><br></pre></td></tr></table></figure>

<h3 id="copy"><a href="#copy" class="headerlink" title="copy"></a>copy</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data := [...]<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line"></span><br><span class="line">s := data[<span class="number">8</span>:]</span><br><span class="line">s2 := data[:<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">copy</span>(s2, s)</span><br><span class="line"></span><br><span class="line">fmt.Println(s2)</span><br><span class="line">fmt.Println(data)</span><br></pre></td></tr></table></figure>

<p>函数<code>copy</code>在两个<code>slice</code>间复制数据，复制长度以len小的为准，两个<code>slice</code>可指向同一底层数组，允许元素区间重叠</p>
<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">m := <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">   age <span class="keyword">int</span></span><br><span class="line">&#125;&#123;</span><br><span class="line">   <span class="number">1</span> : &#123;<span class="string">"user1"</span>, <span class="number">10</span>&#125;,</span><br><span class="line">   <span class="number">2</span> : &#123;<span class="string">"user2"</span>, <span class="number">20</span>&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>常见操作</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用 make 先申请一个大的内存，可避免后续操作时频繁扩张</span></span><br><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">m[<span class="string">"a"</span>] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断 key 是否存在</span></span><br><span class="line"><span class="keyword">if</span> v, ok := m[<span class="string">"a"</span>]; ok &#123;</span><br><span class="line">   <span class="built_in">println</span>(v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对于不存在的 key，会直接返回\0,不会出错</span></span><br><span class="line"><span class="built_in">println</span>(m[<span class="string">"c"</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新增或修改</span></span><br><span class="line">m[<span class="string">"b"</span>] = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除，如果 key 不存在，不会出错</span></span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">"c"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取键值对数量</span></span><br><span class="line"><span class="built_in">println</span>(<span class="built_in">len</span>(m))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对 map 进行迭代</span></span><br><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> m &#123;</span><br><span class="line">   <span class="built_in">println</span>(k, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="struct"><a href="#struct" class="headerlink" title="struct"></a>struct</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> File <span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">   size <span class="keyword">int</span></span><br><span class="line">   attr <span class="keyword">struct</span>&#123;</span><br><span class="line">      perm <span class="keyword">int</span></span><br><span class="line">      owner <span class="keyword">int</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f := File&#123;</span><br><span class="line">   name: <span class="string">"test.txt"</span>,</span><br><span class="line">   size: <span class="number">1025</span>,</span><br><span class="line">   <span class="comment">//attr: &#123;0755, 1&#125;, // Error</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f.attr.owner = <span class="number">1</span></span><br><span class="line">f.attr.perm = <span class="number">0755</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> attr = <span class="keyword">struct</span> &#123;</span><br><span class="line">   perm <span class="keyword">int</span></span><br><span class="line">   owner <span class="keyword">int</span></span><br><span class="line">&#125;&#123;<span class="number">2</span>, <span class="number">0755</span>&#125;</span><br><span class="line"></span><br><span class="line">f.attr = attr</span><br></pre></td></tr></table></figure>

<p>支持<code>!=</code>和<code>==</code>，也可以把结构体变为<code>map</code>的<code>key</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">   id <span class="keyword">int</span></span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">m := <span class="keyword">map</span>[User]<span class="keyword">int</span>&#123;</span><br><span class="line">   User&#123;<span class="number">1</span>, <span class="string">"Tom"</span>&#125;: <span class="number">100</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h3><p>提供一个基于结构体的外包装匿名函数，是一种语法糖，可以像普通字段那样访问匿名字段成员，编译器从外向内逐级查找所有层次的匿名字段，直到发现目标或出错</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Resource <span class="keyword">struct</span> &#123;</span><br><span class="line">   id <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">   Resource</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Manager <span class="keyword">struct</span> &#123;</span><br><span class="line">   User</span><br><span class="line">   title <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> m Manager</span><br><span class="line">m.id = <span class="number">1</span></span><br><span class="line">m.name = <span class="string">"jack"</span></span><br><span class="line">m.title = <span class="string">"Administrator"</span></span><br></pre></td></tr></table></figure>

<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>Go 语言中同时有函数和方法，一个方法就是一个包含了接受者的函数，接受者可以是命名类型或者结构体类型的一个值或者是一个指针，所有给定类型的方法属于该类型的方法集</p>
<p>方法总是绑定对象实例，并隐式的将实例作为第一实参</p>
<ul>
<li>只能为当前包内命名类型定义方法</li>
<li>参数 <code>receiver</code>可任意命名，如方法中 未曾使用，可省略参数名</li>
<li>参数<code>receiver</code>类型可以是<code>T</code>或<code>*T</code>，基类型<code>T</code>不能是接口或指针</li>
<li>不支持方法重载，<code>receiver</code>只是参数签名的组成部分</li>
<li>可用实例<code>value</code>或<code>pointer</code>调用全部方法，编译器自动转换</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Queue <span class="keyword">struct</span> &#123;</span><br><span class="line">   elements []<span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewQueue</span><span class="params">()</span> *<span class="title">Queue</span></span> &#123;</span><br><span class="line">   <span class="keyword">return</span> &amp;Queue&#123;<span class="built_in">make</span>([]<span class="keyword">interface</span>&#123;&#125;, <span class="number">10</span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(*Queue)</span> <span class="title">Push</span><span class="params">(e <span class="keyword">interface</span>&#123;&#125;)</span> <span class="title">error</span></span> &#123;o</span><br><span class="line">   <span class="built_in">panic</span>(<span class="string">"not implemented"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(self *Queue)</span> <span class="title">length</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="built_in">len</span>(self.elements)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方法只是一种特殊的函数，是一种绑定在<code>struct</code>上的一种函数，如下例所示</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Point <span class="keyword">struct</span>&#123;X, Y <span class="keyword">float64</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// traditional function</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Distance</span><span class="params">(p, q Point)</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">   <span class="keyword">return</span> math.Hypot(q.X - p.X, q.Y-p.Y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// same thing, but as a method of the Point type</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Point)</span> <span class="title">Distance</span><span class="params">(q Point)</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">   <span class="keyword">return</span> math.Hypot(q.X-p.X, q.Y-p.Y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   p := Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">   q := Point&#123;<span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">   fmt.Println(Distance(p, q))</span><br><span class="line">   fmt.Println(p.Distance(q))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Point <span class="keyword">struct</span> &#123; X, Y <span class="keyword">float64</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Path []Point</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Point)</span> <span class="title">Distance</span><span class="params">(q Point)</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> math.Hypot(q.X-p.X, q.Y-p.Y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(path Path)</span> <span class="title">Distance</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">	sum := <span class="number">0.0</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="keyword">range</span> path &#123;</span><br><span class="line">		<span class="keyword">if</span> i &gt; <span class="number">0</span> &#123;</span><br><span class="line">			sum += path[i<span class="number">-1</span>].Distance(path[i])</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	perim := Path&#123;</span><br><span class="line">		&#123;<span class="number">1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">		&#123;<span class="number">5</span>, <span class="number">1</span>&#125;,</span><br><span class="line">		&#123;<span class="number">5</span>,  <span class="number">4</span>&#125;,</span><br><span class="line">		&#123;<span class="number">1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(perim.Distance())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="匿名字段"><a href="#匿名字段" class="headerlink" title="匿名字段"></a>匿名字段</h3><p>可以像字段成员那样访问匿名字段方法，编译器负责查找</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">   id <span class="keyword">int</span></span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Manager <span class="keyword">struct</span> &#123;</span><br><span class="line">   User</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(self *User)</span> <span class="title">ToString</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">   <span class="keyword">return</span> fmt.Sprintf(<span class="string">"User: %p, %v"</span>, self, self)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   m := Manager&#123;User&#123;<span class="number">1</span>, <span class="string">"Tom"</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">   fmt.Printf(<span class="string">"Manager: %p\n"</span>, &amp;m)</span><br><span class="line">   fmt.Printf(m.ToString())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过匿名字段，可获得和继承类似的复用能力，依据编译器查找次序，只需在外层定义同名方法，就可以实现<code>override</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">   id <span class="keyword">int</span></span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Manager <span class="keyword">struct</span> &#123;</span><br><span class="line">   User</span><br><span class="line">   title <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(self *User)</span> <span class="title">ToString</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">   <span class="keyword">return</span> fmt.Sprintf(<span class="string">"User: %p, %v"</span>, self, self)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(self *Manager)</span> <span class="title">ToString</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">   <span class="keyword">return</span> fmt.Sprintf(<span class="string">"Manager: %p, %v"</span>, self, self)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   m := Manager&#123;User&#123;<span class="number">1</span>, <span class="string">"Tom"</span>&#125;, <span class="string">"Administrator"</span>&#125;</span><br><span class="line"></span><br><span class="line">   fmt.Println(m.ToString())</span><br><span class="line">   fmt.Println(m.User.ToString())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>接口时一个或多个方法的集合，任何类型的方法集中只要拥有与之对应的全部方法，就表示它”实现“了该接口，无需在该类型上显式添加接口声明</p>
<p>所谓对应方法，是指由相同名称、参数列表（不包括参数名）以及返回值。当然，该类型还可以有其他方法</p>
<ul>
<li>接口命名习惯以<code>er</code>结尾，结构体</li>
<li>接口只有方法签名，没有实现</li>
<li>接口没有数据字段</li>
<li>可以在接口中嵌入其他接口</li>
<li>类型可实现多个接口</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Stringer <span class="keyword">interface</span> &#123;</span><br><span class="line">   String() <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Printer <span class="keyword">interface</span> &#123;</span><br><span class="line">   Stringer</span><br><span class="line">   Print()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">   id <span class="keyword">int</span></span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(self *User)</span> <span class="title">String</span><span class="params">()</span> <span class="title">string</span></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> fmt.Sprintf(<span class="string">"user %d, %s"</span>, self.id, self.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(self *User)</span> <span class="title">Print</span><span class="params">()</span></span> &#123;</span><br><span class="line">   fmt.Println(self.String())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> t Printer = &amp;User&#123;<span class="number">1</span>, <span class="string">"Tom"</span>&#125;</span><br><span class="line">   t.Print()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>User</code>实现了<code>Print()</code>和<code>String()</code>，故可称<code>User</code>实现了<code>Printer</code>和<code>Stringer</code>接口</p>
<h3 id="接口转换"><a href="#接口转换" class="headerlink" title="### 接口转换"></a>### 接口转换</h3><p>利用类型推断，可判断接口对象是否为某个具体的接口或类型，还可以用<code>switch</code>做批量类型判断，不支持<code>fallthrough</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">   id <span class="keyword">int</span></span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(self *User)</span> <span class="title">String</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">   <span class="keyword">return</span> fmt.Sprintf(<span class="string">"%d, %s"</span>, self.id, self.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">var</span> o <span class="keyword">interface</span>&#123;&#125; = &amp;User&#123;<span class="number">1</span>, <span class="string">"Tom"</span>&#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">switch</span> v := o.(<span class="keyword">type</span>) &#123;</span><br><span class="line">   <span class="keyword">case</span> <span class="literal">nil</span>:</span><br><span class="line">      fmt.Println(<span class="string">"nil"</span>)</span><br><span class="line">   <span class="keyword">case</span> fmt.Stringer:</span><br><span class="line">      fmt.Println(v)</span><br><span class="line">   <span class="keyword">case</span> <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">string</span>:</span></span><br><span class="line">      fmt.Println(v())</span><br><span class="line">   <span class="keyword">case</span> *User:</span><br><span class="line">      fmt.Printf(<span class="string">"%d, %s\n"</span>, v.id, v.name)x<span class="string">`</span></span><br><span class="line"><span class="string">   default:</span></span><br><span class="line"><span class="string">      fmt.Println("unknown")</span></span><br><span class="line"><span class="string">   &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>



<h2 id="并发"><a href="#并发" class="headerlink" title="并发"></a>并发</h2><p>Go 语言在语言层面面对并发编程提供支持，一种类似协程，称为<code>goroutine</code>的机制</p>
<p>只需在函数调用语句前添加<code>go</code>关键字，就可创建并发执行单元。开发人员无需了解任何执行细节，调用器会自动将其安排到合适的系统线程上执行。<code>goroutine</code>是一种非常轻量级的实现，可在单个进程里执行成千上万的并发任务。</p>
<p>事实上，入口函数<code>main</code>就以<code>goroutine</code>运行。另有与之配套的<code>channel</code>类型，用于实现“以通讯来共享内存”的CSP模式</p>
<p>调度器不能保证多个<code>goroutine</code>的执行次序，且进程退出时不会等待它们结束</p>
<p>默认情况下，进程启动后仅允许一个系统线程服务于<code>goroutine</code>，可使用环境变量或标准库函数<code>runtime.GOMAXPROCS</code>修改，让调度器用多个线程实现多核并行，而不仅仅是并发</p>
<h3 id="调度器-runtime"><a href="#调度器-runtime" class="headerlink" title="调度器 runtime"></a>调度器 runtime</h3><p>调用<code>runtime.Goexit</code>将立即终止当前<code>goroutine</code>执行，调度器确保u偶有已注册<code>defer</code>延迟调用被执行</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">"runtime"</span></span><br><span class="line">   <span class="string">"sync"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   wg := <span class="built_in">new</span>(sync.WaitGroup)</span><br><span class="line">   wg.Add(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="keyword">defer</span> wg.Done()</span><br><span class="line">      <span class="keyword">defer</span> <span class="built_in">println</span>(<span class="string">"A.defer"</span>)</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">         <span class="keyword">defer</span> <span class="built_in">println</span>(<span class="string">"B.defer"</span>)</span><br><span class="line">         runtime.Goexit()</span><br><span class="line">         <span class="built_in">println</span>(<span class="string">"B"</span>) <span class="comment">// 不会被执行</span></span><br><span class="line">      &#125;()</span><br><span class="line"></span><br><span class="line">      <span class="built_in">println</span>(<span class="string">"A"</span>) <span class="comment">// 不会被执行</span></span><br><span class="line">   &#125;()</span><br><span class="line"></span><br><span class="line">   wg.Wait()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>runtime.Gosched</code>与协程<code>yeild</code>作用类似，让出底层线程，将当前<code>groutine</code>暂停，放回队列等待下次被调度执行</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">"runtime"</span></span><br><span class="line">   <span class="string">"sync"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">   wg := <span class="built_in">new</span>(sync.WaitGroup)</span><br><span class="line">   wg.Add(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="keyword">defer</span> wg.Done()</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">6</span>; i++ &#123;</span><br><span class="line">         <span class="built_in">println</span>(i)</span><br><span class="line">         <span class="keyword">if</span> i == <span class="number">3</span> &#123; runtime.Gosched() &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;()</span><br><span class="line"></span><br><span class="line">   <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">defer</span> wg.Done()</span><br><span class="line">      <span class="built_in">println</span>(<span class="string">"Hello, World!"</span>)</span><br><span class="line">   &#125;()</span><br><span class="line"></span><br><span class="line">   wg.Wait()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a>Channel</h3><p>引用类型<code>Channel</code>是CSP模式的具体表现，用于多个<code>goroutine</code>通讯，其内部实现了同步，确保并发安全</p>
<p>默认为同步模式，需要发送和接收配对，否则会阻塞，直到另一方准备好后被唤醒</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">   data := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">   exit := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="keyword">for</span> d := <span class="keyword">range</span> data &#123;</span><br><span class="line">         fmt.Println(d)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      fmt.Println(<span class="string">"recv over."</span>)</span><br><span class="line">      exit &lt;- <span class="literal">true</span></span><br><span class="line">   &#125;()</span><br><span class="line"></span><br><span class="line">   data &lt;- <span class="number">1</span></span><br><span class="line">   data &lt;- <span class="number">2</span></span><br><span class="line">   data &lt;- <span class="number">3</span></span><br><span class="line">   <span class="built_in">close</span>(data)</span><br><span class="line"></span><br><span class="line">   fmt.Println(<span class="string">"send over."</span>)</span><br><span class="line">   &lt;-exit</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>异步方式通过判断缓冲区来决定是否阻塞。如果缓冲区已满，发送被阻塞；缓冲区为空，接受区被阻塞</p>
<p>通常情况下，异步<code>channel</code>可减少排队阻塞，具备更高的效率，但应该考虑使用指针规避大对象拷贝，将多个元素打包，减小缓冲区大小等</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">   data := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">3</span>) <span class="comment">// 缓冲区可以存储3个元素</span></span><br><span class="line">   exit := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>)</span><br><span class="line"></span><br><span class="line">   data &lt;- <span class="number">1</span>             <span class="comment">// 在缓冲区未满前，不会阻塞</span></span><br><span class="line">   data &lt;- <span class="number">2</span></span><br><span class="line">   data &lt;- <span class="number">3</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="keyword">for</span> d := <span class="keyword">range</span> data &#123; <span class="comment">// 在缓冲区未空前，不会阻塞</span></span><br><span class="line">         fmt.Println(d)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      exit &lt;- <span class="literal">true</span></span><br><span class="line">   &#125;()</span><br><span class="line"></span><br><span class="line">   data &lt;- <span class="number">4</span>            <span class="comment">// 如果缓冲区已满，阻塞</span></span><br><span class="line">   data &lt;- <span class="number">5</span></span><br><span class="line">   <span class="built_in">close</span>(data)</span><br><span class="line"></span><br><span class="line">   &lt;- exito</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>除用<code>range</code>外，还可用<code>ok-idiom</code>模式判断<code>channel</code>是否关闭</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> d, ok := &lt;-data; ok &#123;</span><br><span class="line">        fmt.Println(d)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>向已关闭的<code>closed channel</code>发送数据将引发<code>panic</code>错误，接收立即返回零值</p>
<p>而<code>nil channel</code>，无论收发都会被阻塞</p>
<p>内置函数<code>len</code>返回未被读取的缓冲元素数量，<code>cap</code>返回缓冲区大小</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">d1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">d2 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">d2 &lt;- <span class="number">1</span></span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(d1), <span class="built_in">cap</span>(d1))</span><br><span class="line">fmt.Println(<span class="built_in">len</span>(d2), <span class="built_in">cap</span>(d2))</span><br></pre></td></tr></table></figure>

<h4 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h4><p>如果需要同时处理多个<code>channel</code>，可使用到<code>select</code>语句</p>
<p>它随机选择一个可用<code>channel</code>做收发操作，或执行<code>default case</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">a, b := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">3</span>), <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">   v, ok, s := <span class="number">0</span>, <span class="literal">false</span>, <span class="string">""</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> &#123;</span><br><span class="line">      <span class="keyword">select</span> &#123;      <span class="comment">// 随机选择可用channel，接收数据</span></span><br><span class="line">      <span class="keyword">case</span> v, ok = &lt;- a: s = <span class="string">"a"</span></span><br><span class="line">      <span class="keyword">case</span> v, ok = &lt;- b: s = <span class="string">"b"</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> ok &#123;</span><br><span class="line">         fmt.Println(s, v)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         os.Exit(<span class="number">0</span>)</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;   <span class="comment">// 随机选择可用channel，发送数据</span></span><br><span class="line">   <span class="keyword">select</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> a &lt;- i:</span><br><span class="line">      <span class="keyword">case</span> b &lt;- i:</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">close</span>(a)</span><br><span class="line"><span class="keyword">select</span> &#123;&#125; <span class="comment">// 没有可用channel，阻塞 main goroutine</span></span><br></pre></td></tr></table></figure>

<h1 id="《Go-By-Example》"><a href="#《Go-By-Example》" class="headerlink" title="《Go By Example》"></a>《Go By Example》</h1><blockquote>
<p><a href="http://www.gobyexample.com" target="_blank" rel="noopener">www.gobyexample.com</a></p>
</blockquote>
<h3 id="唯一的循环语句-for"><a href="#唯一的循环语句-for" class="headerlink" title="唯一的循环语句 for"></a>唯一的循环语句 for</h3><p>Go 语言中只有一种循环语句，<code>for</code>，有以下三种典型用法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i &lt;= <span class="number">3</span> &#123;</span><br><span class="line">    fmt.Println(i)</span><br><span class="line">    i++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// a classic initial/condition/after for loop</span></span><br><span class="line"><span class="keyword">for</span> j := <span class="number">7</span>; j &lt;= <span class="number">9</span>; j++ &#123;</span><br><span class="line">    fmt.Println(j)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"loop"</span>)</span><br><span class="line">	<span class="keyword">break</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="可以在if里写新变量声明"><a href="#可以在if里写新变量声明" class="headerlink" title="可以在if里写新变量声明"></a>可以在if里写新变量声明</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a, b = <span class="number">5000</span>, <span class="number">1000</span></span><br><span class="line"><span class="keyword">if</span> num := a-b; num &lt; <span class="number">0</span> &#123;</span><br><span class="line">	fmt.Println(num, <span class="string">"is negative"</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> num &lt; <span class="number">10</span> &#123;</span><br><span class="line">	fmt.Println(num, <span class="string">"has 1 digit"</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	fmt.Println(num, <span class="string">"has multiple digits"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h3><p>与Python类似，但比Python稍弱，不能传入负数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">l := s[<span class="number">2</span>:<span class="number">5</span>]</span><br><span class="line">fmt.Println(<span class="string">"sl1:"</span>, l)</span><br><span class="line"></span><br><span class="line">l = s[:<span class="number">5</span>]</span><br><span class="line">fmt.Println(<span class="string">"sl2"</span>, l)</span><br><span class="line"></span><br><span class="line">l = s[<span class="number">2</span>:]</span><br><span class="line">fmt.Println(<span class="string">"sl3"</span>, l)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p>与c++的map类似</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line"></span><br><span class="line">m[<span class="string">"k1"</span>] = <span class="number">7</span></span><br><span class="line">m[<span class="string">"k2"</span>] = <span class="number">13</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"map:"</span>, m)</span><br><span class="line"></span><br><span class="line">v1 := m[<span class="string">"k1"</span>]</span><br><span class="line">fmt.Println(<span class="string">"v1: "</span>, v1)</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">"len:"</span>, <span class="built_in">len</span>(m))</span><br><span class="line"></span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">"k2"</span>)</span><br><span class="line">fmt.Println(<span class="string">"map:"</span>, m)</span><br><span class="line"></span><br><span class="line">_, prs := m[<span class="string">"k2"</span>]</span><br><span class="line">fmt.Println(<span class="string">"prs:"</span>, prs)</span><br><span class="line"></span><br><span class="line">n := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;<span class="string">"foo"</span>: <span class="number">1</span>, <span class="string">"bar"</span>: <span class="number">2</span>&#125;</span><br><span class="line">fmt.Println(<span class="string">"map:"</span>, n)</span><br></pre></td></tr></table></figure>

<p>并且Go语言的<code>map</code>提供了一种区分<code>key</code>值为<code>0</code>或者为<code>“”</code>与在<code>map</code>中不存在的<code>key</code>值的机制</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">m[<span class="string">"k1"</span>] = <span class="number">7</span></span><br><span class="line">m[<span class="string">"k2"</span>] = <span class="number">13</span>	</span><br><span class="line">m[<span class="string">""</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">"k2"</span>)</span><br><span class="line">fmt.Println(<span class="string">"map:"</span>, m)</span><br><span class="line"></span><br><span class="line"><span class="comment">//return false</span></span><br><span class="line">_, prs := m[<span class="string">"k2"</span>]</span><br><span class="line">fmt.Println(<span class="string">"prs:"</span>, prs)</span><br><span class="line"></span><br><span class="line"><span class="comment">// return true</span></span><br><span class="line">_, prs = m[<span class="string">""</span>]</span><br><span class="line">fmt.Println(<span class="string">"prs:"</span>, prs)</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h3><p>类似Python的<code>for range</code>但比python的更加好用</p>
<p>Go语言的<code>range</code>默认为2个参数，第一个参数可以赋值或者使用<code>_</code>后不去使用它，这里第一个参数在每次循环结束之后会重新赋值，所以无法在函数内部改变它，第一个值如果使用，会是一个从0开始自增的变量。第二个值返回要迭代的对象的值。<strong>注意</strong>：<strong><code>for-range</code>是对<code>index</code>和值进行了复制而不是引用，所以改变这两个值不会对本来需要迭代的对象进行改变，所以，这两个值在每一次循环结束，在循环头都会重新赋值</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">nums := []<span class="keyword">int</span>&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;</span><br><span class="line">	sum := <span class="number">0</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, num := <span class="keyword">range</span> nums &#123;</span><br><span class="line">		sum += num</span><br><span class="line">		nums = <span class="built_in">append</span>(nums, <span class="number">1</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"sum:"</span>, sum)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i, num := <span class="keyword">range</span> nums &#123;</span><br><span class="line">		<span class="keyword">if</span> num == <span class="number">3</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">"index"</span>, i)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	kvs := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;<span class="string">"a"</span>: <span class="string">"apple"</span>, <span class="string">"b"</span>: <span class="string">"banana"</span>, <span class="string">"c"</span>: <span class="string">"caonima"</span>, <span class="string">"d"</span>: <span class="string">"diaonm"</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> k, v := <span class="keyword">range</span> kvs &#123;</span><br><span class="line">		fmt.Println(<span class="string">"%s -&gt; %s\n"</span>, k, v)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> kvs &#123;</span><br><span class="line">		fmt.Println(<span class="string">"value:"</span>, v)</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> i, c := <span class="keyword">range</span> <span class="string">"go"</span> &#123;</span><br><span class="line">		fmt.Println(i, c)</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Tips:</strong>对<code>golang</code>的<code>map</code>进行<code>for-range</code>迭代的结果的顺序是随机的</p>
<hr>
<h3 id="不确定变量函数"><a href="#不确定变量函数" class="headerlink" title="不确定变量函数"></a>不确定变量函数</h3><p>使用 <code>...</code>在函数声明的时候，如果有多个不定参数的情况，可以接受多个不确定数量的参数 ，内部实现类似传递数组指针？</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(nums ...<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Println(nums, <span class="string">" "</span>)</span><br><span class="line">	total := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> _, num := <span class="keyword">range</span> nums &#123;</span><br><span class="line">		total += num</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(total)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	sum(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">	sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">	nums := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	sum(nums...)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="匿名函数与闭包-closures"><a href="#匿名函数与闭包-closures" class="headerlink" title="匿名函数与闭包(closures)"></a>匿名函数与闭包(closures)</h3><p>由于函数在<code>Golang</code>里是一等公民，这意味着函数可以像普通类型一样进行赋值、作为函数的参数传递、作为函数的返回值，<code>Golang</code>只能返回匿名函数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	n := <span class="number">0</span></span><br><span class="line">	f := <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">		n += <span class="number">1</span></span><br><span class="line">		<span class="keyword">return</span> n</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(f())</span><br><span class="line">	fmt.Println(f())</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">output:</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">2</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>当一个函数被赋值为另一个函数返回的闭包时，他将一直处在这个闭包中，直到该函数对象被销毁</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">intSeq</span><span class="params">()</span> <span class="title">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">		i++</span><br><span class="line">		<span class="keyword">return</span> i</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	nextInt := intSeq()</span><br><span class="line"></span><br><span class="line">	fmt.Println(nextInt())</span><br><span class="line">	fmt.Println(nextInt())</span><br><span class="line">	fmt.Println(nextInt())</span><br><span class="line"></span><br><span class="line">	nextInts := intSeq()</span><br><span class="line">	fmt.Println(nextInts())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h3><p>目前认为和CPP里的指针一样，可以通过传递内存中地址的方式，在一个函数中改变在另外一个函数中申明/生成的变量</p>
<p> Go中一切都通过值传递，也就是说，一个函数总是得到值传递的副本，总是会分配一个值的副本给函数参数。 </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">zeroval</span><span class="params">(ival <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	ival = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">zeroptr</span><span class="params">(iptr *<span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">	*iptr = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	i := <span class="number">1</span></span><br><span class="line">	fmt.Println(<span class="string">"initial"</span>, i)</span><br><span class="line"></span><br><span class="line">	zeroval(i)</span><br><span class="line">	fmt.Println(<span class="string">"initial"</span>, i)</span><br><span class="line"></span><br><span class="line">	zeroptr(&amp;i)</span><br><span class="line">	fmt.Println(<span class="string">"zeroptr:"</span>, i)</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"pointer:"</span>, &amp;i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="结构体-struct"><a href="#结构体-struct" class="headerlink" title="结构体(struct)"></a>结构体(struct)</h3><p>目前觉得与cpp中的结构体类似，使用Go的指针可以改变结构体内的值（与cpp中的结构体引用类似？）</p>
<p>另外，如果忽略一个结构的赋值将自动赋值0或<code>“”</code>（省去了构造函数里的默认参数？）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewPerson</span><span class="params">(name <span class="keyword">string</span>)</span> *<span class="title">person</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	p := person&#123;name: name&#125;</span><br><span class="line">	p.age = <span class="number">42</span></span><br><span class="line">	<span class="keyword">return</span> &amp;p</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	fmt.Println(person&#123;<span class="string">"Bob"</span>, <span class="number">20</span>&#125;)</span><br><span class="line"></span><br><span class="line">	fmt.Println(person&#123;name: <span class="string">"Alice"</span>, age: <span class="number">30</span>&#125;)</span><br><span class="line"></span><br><span class="line">	fmt.Println(person&#123;name: <span class="string">"Fred"</span>&#125;)</span><br><span class="line"></span><br><span class="line">	fmt.Println(&amp;person&#123;name: <span class="string">"Ann"</span>, age:<span class="number">40</span>&#125;)</span><br><span class="line"></span><br><span class="line">	fmt.Println(NewPerson(<span class="string">"Jon"</span>))</span><br><span class="line"></span><br><span class="line">	s := person&#123;name: <span class="string">"Sean"</span>, age: <span class="number">50</span>&#125;</span><br><span class="line">	fmt.Println(s.name)</span><br><span class="line"></span><br><span class="line">	sp := &amp;s</span><br><span class="line">	fmt.Println(sp.age)</span><br><span class="line"></span><br><span class="line">	sp.age = <span class="number">51</span></span><br><span class="line">	fmt.Println(sp.age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="方法-methods"><a href="#方法-methods" class="headerlink" title="方法(methods)"></a>方法(methods)</h3><p>Go 用结构体加方法来造出来其他语言的类？</p>
<p>另外，可以用指针来传递结构体，从而改变结构体中存放的变量或者（避免在方法中因为进行对传入结构体的复制而进行的不必要的开销？）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> rect <span class="keyword">struct</span> &#123;</span><br><span class="line">	width, height <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *rect)</span> <span class="title">area</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> r.width * r.height</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r rect)</span> <span class="title">perim</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">2</span> * r.width + <span class="number">2</span> * r.height</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	r := rect&#123;width: <span class="number">10</span>, height: <span class="number">5</span>&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"area: "</span>, r.area())</span><br><span class="line">	fmt.Println(<span class="string">"perim: "</span>, r.perim())</span><br><span class="line"></span><br><span class="line">	rp := &amp;r</span><br><span class="line">	fmt.Println(<span class="string">"area: "</span>, rp.area())</span><br><span class="line">	fmt.Println(<span class="string">"perim: "</span>, rp.perim())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="接口-interfaces"><a href="#接口-interfaces" class="headerlink" title="接口(interfaces)"></a>接口(interfaces)</h3><p>接口是一组方法的集合，类似一个方法们的结构体</p>
<p><strong>注意：接口是完全抽象的，因此不能将它实例化</strong></p>
<p>接口的两个重要特性</p>
<ol>
<li><p>只要某个类型实现了接口要的方法，那么我们就说该类型实现了此接口。该类型的值可以赋给该接口的值（鸭子类型？）</p>
</li>
<li><p>作为1的推论，任何类型的值都可以赋值给空接口interface{}</p>
</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> geometry <span class="keyword">interface</span> &#123;</span><br><span class="line">	area() <span class="keyword">float64</span></span><br><span class="line">	perim() <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> rect <span class="keyword">struct</span> &#123;</span><br><span class="line">	width, height <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> circle <span class="keyword">struct</span> &#123;</span><br><span class="line">	radius <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r rect)</span> <span class="title">area</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> r.width * r.height</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r rect)</span> <span class="title">perim</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">2</span> * r.width + <span class="number">2</span> * r.height</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c circle)</span> <span class="title">area</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> math.Pi * c.radius * c.radius</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c circle)</span> <span class="title">perim</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">2</span> * math.Pi * c.radius</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">measure</span><span class="params">(g geometry)</span></span> &#123;</span><br><span class="line">	fmt.Println(g)</span><br><span class="line">	fmt.Println(g.area())</span><br><span class="line">	fmt.Println(g.perim())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	r := rect&#123;width: <span class="number">3</span>, height: <span class="number">4</span>&#125;</span><br><span class="line">	c := circle&#123;radius: <span class="number">5</span>&#125;</span><br><span class="line"></span><br><span class="line">	measure(r)</span><br><span class="line">	measure(c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h3><p>没看懂。。。。</p>
<hr>
<h3 id="Go内置的并发-Goroutines"><a href="#Go内置的并发-Goroutines" class="headerlink" title="Go内置的并发(Goroutines)"></a>Go内置的并发(Goroutines)</h3><p>在函数调用或者匿名函数调用之前加上<code>go</code>，会使这些函数调用在不同的<code>goroutines</code>协程运行</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(from <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123;</span><br><span class="line">		fmt.Println(from, <span class="string">":"</span>, i)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	f(<span class="string">"direct"</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> f(<span class="string">"goroutine"</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(msg <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">		fmt.Println(msg)</span><br><span class="line">	&#125;(<span class="string">"going"</span>)</span><br><span class="line"></span><br><span class="line">	time.Sleep(time.Second)</span><br><span class="line">	fmt.Println(<span class="string">"done"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="管道-channels"><a href="#管道-channels" class="headerlink" title="管道(channels)"></a>管道(channels)</h3><p>是连接正在运行中的<code>goroutines</code>的通道，使彼此之间可以通信，通过管道可以从一个正在运行的<code>goroutines</code>的值发送到另一个<code>goroutines</code>中</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个 string 类型的管道</span></span><br><span class="line">message := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// write to channel</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123; message &lt;- <span class="string">"ping"</span> &#125; ()</span><br><span class="line"></span><br><span class="line"><span class="comment">// read by channel</span></span><br><span class="line">msg := &lt;-message</span><br><span class="line"></span><br><span class="line">fmt.Println(msg)</span><br></pre></td></tr></table></figure>

<p><strong>缓存管道</strong></p>
<p>管道声明默认是无缓存的，从无缓存的 channel 中读取消息会阻塞，直到有 goroutine 向该 channel 中发送消息；同理，向无缓存的 channel 中发送消息也会阻塞，直到有 goroutine 从 channel 中读取消息。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">message := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">message &lt;- <span class="string">"buffered"</span></span><br><span class="line">message &lt;- <span class="string">"channel"</span></span><br><span class="line"></span><br><span class="line">fmt.Println(&lt;-message)</span><br><span class="line">fmt.Println(&lt;-message)</span><br></pre></td></tr></table></figure>

<h3 id="Select"><a href="#Select" class="headerlink" title="Select"></a>Select</h3><p>select 是 go 中的一个控制结构，类似于用于通信的 <code>switch</code> 语句，每个 <code>case</code> 必须是一个通信操作，要么是发送要么是接收</p>
<p><code>select</code>随机执行一个可运行的<code>case</code>，如果没有<code>case</code>可运行，它将阻塞，直到有<code>case</code>可运行</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	c1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>)</span><br><span class="line">	c2 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">		c1 &lt;- <span class="string">"one"</span></span><br><span class="line">	&#125;() </span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		time.Sleep(<span class="number">2</span> * time.Second)</span><br><span class="line">		c2 &lt;- <span class="string">"two"</span></span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">2</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">select</span> &#123;</span><br><span class="line">		<span class="keyword">case</span> msg1 := &lt;-c1:</span><br><span class="line">			fmt.Println(<span class="string">"Received"</span>, msg1)</span><br><span class="line">		<span class="keyword">case</span> msg2 := &lt;-c2:</span><br><span class="line">			fmt.Println(<span class="string">"Received"</span>, msg2)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>使用<code>select</code> 完成超时</strong></p>
<p>超时对于需要连接到外部资源或需要限制执行时间的程序来说很重要，使用<code>channel</code>和<code>select</code>科研在 go 中优雅的完成这一要求</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	c1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">1</span>)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		time.Sleep(<span class="number">2</span> * time.Second)</span><br><span class="line">		c1 &lt;- <span class="string">"result 1"</span></span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">select</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> res := &lt;- c1:</span><br><span class="line">		fmt.Println(res)</span><br><span class="line">	<span class="keyword">case</span> &lt;-time.After(<span class="number">1</span> * time.Second):</span><br><span class="line">		fmt.Println(<span class="string">"timeout 1"</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	c2 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">1</span>)</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		time.Sleep(<span class="number">2</span> * time.Second)</span><br><span class="line">		c2 &lt;- <span class="string">"result 2"</span></span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">select</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> res := &lt;-c2:</span><br><span class="line">		fmt.Println(res)</span><br><span class="line">	<span class="keyword">case</span> &lt;-time.After(<span class="number">3</span> * time.Second):</span><br><span class="line">		fmt.Println(<span class="string">"timeout 2"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="管道的关闭与管道出值的第二个值"><a href="#管道的关闭与管道出值的第二个值" class="headerlink" title="管道的关闭与管道出值的第二个值"></a>管道的关闭与管道出值的第二个值</h3><p>使用<code>j, more := &lt;-jobs</code>时，当管道中的所有值都被接收或者管道被关闭时，<code>more</code>会被赋值<code>false</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	jobs := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">5</span>)</span><br><span class="line">	done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> &#123;</span><br><span class="line">			j, more := &lt;-jobs</span><br><span class="line">			<span class="keyword">if</span> more &#123;</span><br><span class="line">				fmt.Println(<span class="string">"Received job"</span>, j)</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				fmt.Println(<span class="string">"Received all jobs"</span>)</span><br><span class="line">				done &lt;- <span class="literal">true</span></span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> j := <span class="number">1</span>; j &lt;= <span class="number">3</span>; j++ &#123;</span><br><span class="line">		jobs &lt;- j</span><br><span class="line">		fmt.Println(<span class="string">"send job"</span>, j)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">close</span>(jobs)</span><br><span class="line">	fmt.Println(<span class="string">"sent all jobs"</span>)</span><br><span class="line"></span><br><span class="line">	&lt;-done</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h3><blockquote>
<p><code>time.NewTimer()</code></p>
</blockquote>
<p>如果希望未来某个时间点执行Go代码，可以使用定时器</p>
<p>计时器代表着未来某个时间，在创建定时器时需要让他知道需要等待的时间</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    timer1 := time.NewTimer(<span class="number">2</span> * time.Second)</span><br><span class="line"></span><br><span class="line">    &lt;-timer1.C</span><br><span class="line">    fmt.Println(<span class="string">"Timer 1 expired"</span>)</span><br><span class="line"></span><br><span class="line">    timer2 := time.NewTimer(time.Second)</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        &lt;-timer2.C</span><br><span class="line">        fmt.Println(<span class="string">"Timer 2 expired"</span>)</span><br><span class="line">    &#125;()</span><br><span class="line">    stop2 := timer2.Stop()</span><br><span class="line">    <span class="keyword">if</span> stop2 &#123;</span><br><span class="line">        fmt.Println(<span class="string">"Timer 2 stopped"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h3><blockquote>
<p><code>time.NewTicker()</code></p>
</blockquote>
<p>创建一个间歇性触发的机关</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ticker := time.NewTicker(<span class="number">500</span> * time.Millisecond)</span><br><span class="line">done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="keyword">select</span> &#123;</span><br><span class="line">		<span class="keyword">case</span> &lt;-done:</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		<span class="keyword">case</span> t := &lt;-ticker.C:</span><br><span class="line">			fmt.Println(<span class="string">"Tick at"</span>, t)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">time.Sleep(<span class="number">1600</span> * time.Millisecond)</span><br><span class="line">ticker.Stop()</span><br><span class="line">done &lt;- <span class="literal">true</span></span><br><span class="line">fmt.Println(<span class="string">"Ticker stopped"</span>)</span><br></pre></td></tr></table></figure>

<h3 id="runtime-调度器"><a href="#runtime-调度器" class="headerlink" title="runtime 调度器"></a>runtime 调度器</h3><p><code>runtime.Gosched</code> 让当前线程让出 CPU 以让其它线程运行，它不会挂起当前线程，因此当前线程未来会继续执行</p>
<h3 id="使用函数自定义排序"><a href="#使用函数自定义排序" class="headerlink" title="使用函数自定义排序"></a>使用函数自定义排序</h3><p>在自定义排序中实现<code>sort</code>接口的<code>Len</code>、<code>Less</code>和<code>Swap</code>方法，之后就可以调用<code>sort</code>包中的通用<code>Sort</code>方法了</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> ByLength []<span class="keyword">string</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s ByLength)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">len</span>(s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s ByLength)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	s[i], s[j] = s[j], s[i]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s ByLength)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">len</span>(s[i]) &lt; <span class="built_in">len</span>(s[j])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span> <span class="params">()</span></span> &#123;</span><br><span class="line">	fruits := []<span class="keyword">string</span>&#123;<span class="string">"peach"</span>, <span class="string">"banana"</span>, <span class="string">"kiwi"</span>&#125;</span><br><span class="line">	sort.Sort(ByLength(fruits))</span><br><span class="line">	fmt.Println(fruits)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里想按照字符串长度排序，所以这里使用了<code>len(s[i])</code>和<code>len(s[j])</code></p>
<h3 id="使用-Panic-和-Defer-进行错误处理"><a href="#使用-Panic-和-Defer-进行错误处理" class="headerlink" title="使用 Panic 和 Defer 进行错误处理"></a>使用 Panic 和 Defer 进行错误处理</h3><p>Go 中习惯于通过返回值来标示错误，而不像其他语言中使用异常处理错误</p>
<p>Defer 用来确保一个函数调用在程序执行结束前执行，同样用来执行一些清理工作，类似其他语言中的 <code>Finally</code></p>
<h3 id="组合函数"><a href="#组合函数" class="headerlink" title="组合函数"></a>组合函数</h3><p>Go 语言不支持泛型，可以使用组合函数来操作函数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Index</span><span class="params">(vs []<span class="keyword">string</span>, t <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i, v := <span class="keyword">range</span> vs &#123;</span><br><span class="line">		<span class="keyword">if</span> v == t &#123;</span><br><span class="line">			<span class="keyword">return</span> i</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Include</span><span class="params">(vs []<span class="keyword">string</span>, t <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> Index(vs, t) &gt;= <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Any</span><span class="params">(vs []<span class="keyword">string</span>, f <span class="keyword">func</span>(<span class="keyword">string</span>)</span> <span class="title">bool</span>) <span class="title">bool</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> vs &#123;</span><br><span class="line">		<span class="keyword">if</span> f(v) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">All</span><span class="params">(vs []<span class="keyword">string</span>, f <span class="keyword">func</span>(<span class="keyword">string</span>)</span> <span class="title">bool</span>) <span class="title">bool</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> vs &#123;</span><br><span class="line">		<span class="keyword">if</span> f(v) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Filter</span><span class="params">(vs []<span class="keyword">string</span>, f <span class="keyword">func</span>(<span class="keyword">string</span>)</span> <span class="title">bool</span>) []<span class="title">string</span></span> &#123;</span><br><span class="line">	vsf := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> vs &#123;</span><br><span class="line">		<span class="keyword">if</span> !f(v) &#123;</span><br><span class="line">			vsf = <span class="built_in">append</span>(vsf, v)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> vsf</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Map</span><span class="params">(vs []<span class="keyword">string</span>, f <span class="keyword">func</span>(<span class="keyword">string</span>)</span> <span class="title">string</span>) [] <span class="title">string</span></span> &#123;</span><br><span class="line">	vsm := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="built_in">len</span>(vs))</span><br><span class="line">	<span class="keyword">for</span> i, v := <span class="keyword">range</span> vs &#123;</span><br><span class="line">		vsm[i] = f(v)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> vsm</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span> <span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> strs = []<span class="keyword">string</span>&#123;<span class="string">"peach"</span>, <span class="string">"apple"</span>, <span class="string">"pear"</span>, <span class="string">"plum"</span>&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(Index(strs, <span class="string">"pear"</span>))</span><br><span class="line"></span><br><span class="line">	fmt.Println(Include(strs, <span class="string">"grape"</span>))</span><br><span class="line"></span><br><span class="line">	fmt.Println(Any(strs, <span class="function"><span class="keyword">func</span><span class="params">(v <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">		<span class="keyword">return</span> strings.HasPrefix(v, <span class="string">"p"</span>)</span><br><span class="line">	&#125;))</span><br><span class="line"></span><br><span class="line">	fmt.Println(All(strs, <span class="function"><span class="keyword">func</span><span class="params">(v <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">		<span class="keyword">return</span> strings.HasPrefix(v, <span class="string">"p"</span>)</span><br><span class="line">	&#125;))</span><br><span class="line"></span><br><span class="line">	fmt.Println(Filter(strs, <span class="function"><span class="keyword">func</span><span class="params">(v <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">		<span class="keyword">return</span> strings.Contains(v, <span class="string">"e"</span>)</span><br><span class="line">	&#125;))</span><br><span class="line"></span><br><span class="line">	fmt.Println(Map(strs, strings.ToUpper))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><blockquote>
<p>Go语言字符串函数标准库 <a href="https://golang.org/pkg/strings/" target="_blank" rel="noopener">https://golang.org/pkg/strings/</a></p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> s <span class="string">"strings"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 给予 fmt.Println 一个短名字的别名，我们随后将会经常用到</span></span><br><span class="line"><span class="keyword">var</span> p = fmt.Println</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span> <span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	p(<span class="string">"Contains:   "</span>, s.Contains(<span class="string">"test"</span>, <span class="string">"es"</span>))</span><br><span class="line">	p(<span class="string">"Count:      "</span>, s.Count(<span class="string">"test"</span>, <span class="string">"t"</span>))</span><br><span class="line">	p(<span class="string">"HasPrefix:  "</span>, s.HasPrefix(<span class="string">"test"</span>, <span class="string">"te"</span>))</span><br><span class="line">	p(<span class="string">"HasSuffix:  "</span>, s.HasSuffix(<span class="string">"test"</span>, <span class="string">"st"</span>))</span><br><span class="line">	p(<span class="string">"Index:      "</span>, s.Index(<span class="string">"test"</span>, <span class="string">"e"</span>))</span><br><span class="line">	p(<span class="string">"Join:       "</span>, s.Join([]<span class="keyword">string</span>&#123;<span class="string">"a"</span>, <span class="string">"b"</span>&#125;, <span class="string">"-"</span>))</span><br><span class="line">	p(<span class="string">"Repeat:     "</span>, s.Repeat(<span class="string">"a"</span>, <span class="number">5</span>))</span><br><span class="line">	p(<span class="string">"Replace:    "</span>, s.Replace(<span class="string">"foo"</span>, <span class="string">"o"</span>, <span class="string">"0"</span>, <span class="number">-1</span>))</span><br><span class="line">	p(<span class="string">"Replace:    "</span>, s.Replace(<span class="string">"foo"</span>, <span class="string">"o"</span>, <span class="string">"0"</span>, <span class="number">1</span>))</span><br><span class="line">	p(<span class="string">"Split:      "</span>, s.Split(<span class="string">"a-b-c-d-e"</span>, <span class="string">"-"</span>))</span><br><span class="line">	p(<span class="string">"ToLower:    "</span>, s.ToLower(<span class="string">"TEST"</span>))</span><br><span class="line">	p(<span class="string">"ToUpper:    "</span>, s.ToUpper(<span class="string">"test"</span>))</span><br><span class="line">	p()</span><br><span class="line"></span><br><span class="line">	p(<span class="string">"Len: "</span>, <span class="built_in">len</span>(<span class="string">"hello"</span>))</span><br><span class="line">	p(<span class="string">"Char:"</span>, <span class="string">"hello"</span>[<span class="number">1</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这一部分的字符串处理的函数，似乎跟Python一样方便</p>
<h3 id="字符串格式化"><a href="#字符串格式化" class="headerlink" title="字符串格式化"></a>字符串格式化</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> point <span class="keyword">struct</span> &#123;</span><br><span class="line">	x, y <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span> <span class="params">()</span></span> &#123;</span><br><span class="line">	p := point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">"%v\n"</span>, p)</span><br><span class="line">	fmt.Printf(<span class="string">"%+v\n"</span>, p)</span><br><span class="line">	fmt.Printf(<span class="string">"%#v\n"</span>, p)</span><br><span class="line">	fmt.Printf(<span class="string">"%T\n"</span>, p)</span><br><span class="line">	fmt.Printf(<span class="string">"%t\n"</span>, <span class="literal">true</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"%d\n"</span>, <span class="number">123</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"%b\n"</span>, <span class="number">14</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"%c\n"</span>, <span class="number">33</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"%x\n"</span>, <span class="number">456</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"%f\n"</span>, <span class="number">78.9</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">"%e\n"</span>, <span class="number">123400000.0</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"%E\n"</span>, <span class="number">123400000.0</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">"%s\n"</span>, <span class="string">"\"string\""</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"%q\n"</span>, <span class="string">"\"string\""</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"%x\n"</span>, <span class="string">"hex this"</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">"%p\n"</span>, &amp;p)</span><br><span class="line">	fmt.Printf(<span class="string">"|%6d|%6d|\n"</span>, <span class="number">12</span>, <span class="number">345</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"|%6.2f|%6.2f|\n"</span>, <span class="number">1.2</span>, <span class="number">3.45</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"|%-6.2f|%-6.2f|\n"</span>, <span class="number">1.2</span>, <span class="number">3.45</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"|%6s|%6s|\n"</span>, <span class="string">"foo"</span>, <span class="string">"b"</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"|%-6s|%-6s|\n"</span>, <span class="string">"foo"</span>, <span class="string">"b"</span>)</span><br><span class="line"></span><br><span class="line">	s := fmt.Sprintf(<span class="string">"a %s\n"</span>, <span class="string">"string"</span>)</span><br><span class="line">	fmt.Printf(s)</span><br><span class="line"></span><br><span class="line">	fmt.Fprintf(os.Stderr, <span class="string">"an %s\n"</span>, <span class="string">"error"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="正则"><a href="#正则" class="headerlink" title="正则"></a>正则</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">match, _ := regexp.MatchString(<span class="string">"p([a-z]+)ch"</span>, <span class="string">"peach"</span>)</span><br><span class="line">fmt.Println(match)</span><br><span class="line"></span><br><span class="line">r, _ := regexp.Compile(<span class="string">"p([a-z]+)ch"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配字符串</span></span><br><span class="line">fmt.Println(r.MatchString(<span class="string">"peach"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回首次匹配到的字符串</span></span><br><span class="line">fmt.Println(r.FindString(<span class="string">"peach punch"</span>))</span><br><span class="line"><span class="comment">// 返回首次匹配到的字符串的头尾索引</span></span><br><span class="line">fmt.Println(r.FindStringIndex(<span class="string">"peach punch"</span>))</span><br><span class="line"><span class="comment">// 返回首次的匹配值和正则中间值</span></span><br><span class="line">fmt.Println(r.FindStringSubmatch(<span class="string">"peach punch"</span>))</span><br><span class="line"><span class="comment">// 与上面相同，但返回的是索引</span></span><br><span class="line">fmt.Println(r.FindStringSubmatchIndex(<span class="string">"peach punch"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回所有匹配值，不仅仅是首次匹配的</span></span><br><span class="line">fmt.Println(r.FindAllString(<span class="string">"peach punch pinch"</span>, <span class="number">-1</span>))</span><br><span class="line"><span class="comment">// 返回所有匹配值和正则中间值</span></span><br><span class="line">fmt.Println(r.FindAllStringSubmatch(<span class="string">"peach punch pinch"</span>, <span class="number">-1</span>))</span><br><span class="line"><span class="comment">// 返回所有匹配值和正则中间值的索引</span></span><br><span class="line">fmt.Println(r.FindAllStringSubmatchIndex(<span class="string">"peach punch pinch"</span>, <span class="number">-1</span>))</span><br><span class="line"><span class="comment">// 给与一个参数来限制在所有字符串中搜索所匹配的次数</span></span><br><span class="line">fmt.Println(r.FindAllString(<span class="string">"peach punch pinch"</span>, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">fmt.Println(r.Match([]<span class="keyword">byte</span>(<span class="string">"peach"</span>)))</span><br><span class="line"></span><br><span class="line">r = regexp.MustCompile(<span class="string">"p([a-z]+)ch"</span>)</span><br><span class="line">fmt.Println(r)</span><br><span class="line"></span><br><span class="line">fmt.Println(r.ReplaceAllString(<span class="string">"a peach"</span>, <span class="string">"&lt;fruit&gt;"</span>))</span><br><span class="line"></span><br><span class="line">in := []<span class="keyword">byte</span>(<span class="string">"a peach"</span>)</span><br><span class="line">out := r.ReplaceAllFunc(in, bytes.ToUpper)</span><br><span class="line">fmt.Println(<span class="keyword">string</span>(out))</span><br></pre></td></tr></table></figure>

<h3 id="生成临时文件"><a href="#生成临时文件" class="headerlink" title="生成临时文件"></a>生成临时文件</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">check</span><span class="params">(e error)</span></span> &#123;</span><br><span class="line">   <span class="keyword">if</span> e != <span class="literal">nil</span> &#123;</span><br><span class="line">      <span class="built_in">panic</span>(e)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   f, err := ioutil.TempFile(<span class="string">""</span>, <span class="string">"sample"</span>)</span><br><span class="line">   check(err)</span><br><span class="line"></span><br><span class="line">   fmt.Println(<span class="string">"Temp file name:"</span>, f.Name())</span><br><span class="line"></span><br><span class="line">   _, err = f.Write([]<span class="keyword">byte</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;)</span><br><span class="line">   check(err)</span><br><span class="line"></span><br><span class="line">   dname, err := ioutil.TempDir(<span class="string">""</span>, <span class="string">"sampledir"</span>)</span><br><span class="line">   fmt.Println(<span class="string">"Temp dir name:"</span>, dname)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">defer</span> os.RemoveAll(dname)</span><br><span class="line"></span><br><span class="line">   fname := filepath.Join(dname, <span class="string">"file1"</span>)</span><br><span class="line">   err = ioutil.WriteFile(fname, []<span class="keyword">byte</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;, <span class="number">0666</span>)</span><br><span class="line">   check(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Temp file name: C:\Users\amezf\AppData\Local\Temp\sample513635515</span></span><br><span class="line"><span class="comment">//Temp dir name: C:\Users\amezf\AppData\Local\Temp\sampledir353601758</span></span><br></pre></td></tr></table></figure>

<h1 id="《Go-语言实战》"><a href="#《Go-语言实战》" class="headerlink" title="《Go 语言实战》"></a>《Go 语言实战》</h1></div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2020/01/11/2020-%E5%B9%B4%E8%AF%BB%E7%9A%84%E4%B9%A6/">2020 年读的书</a><a class="next" href="/2020/01/11/hello-world/">Hello World</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Golang/">Golang</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AD%E6%9C%9F%E7%AD%9B%E9%80%89/">中期筛选</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%88%B7%E9%A2%98/">刷题</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E8%AE%B0/">杂记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/05/12/%E5%89%91%E6%8C%87offer/">剑指offer</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/25/Effective-Go/">Effective Go</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/15/The-Go-Programming-Language%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">The-Go-Programming-Language 读书笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/14/%E5%BE%AE%E6%9C%BA%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/">微机原理笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/13/%E3%80%8A%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E3%80%8B%E7%AC%94%E8%AE%B0/">《汇编语言》笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/11/2020-%E5%B9%B4%E8%AF%BB%E7%9A%84%E4%B9%A6/">2020 年读的书</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/11/%E3%80%8Ago%E8%AF%AD%E8%A8%80%E7%AC%94%E8%AE%B0%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">《Go 语言笔记》、《Go By Example》读书笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/11/hello-world/">Hello World</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">Amezf's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>